flowchart LR
    %% Left
    User[["User"]]

    %% Center - Registration Flow
    P111(("1.1.1<br/>Register<br/>Account"))
    P113(("1.1.3<br/>Validate<br/>Email"))
    P112(("1.1.2<br/>Hash<br/>Password"))
    P114(("1.1.4<br/>Create<br/>User Record"))
    P115(("1.1.5<br/>Assign<br/>Default Role"))

    %% View Flow
    P116(("1.1.6<br/>View<br/>Account"))

    %% Data Stores
    D1[(D1: User<br/>Accounts)]
    D2[(D2: Roles)]

    %% Registration flows
    User -->|Email, Password| P111
    P111 -->|Validate| P113
    P113 -->|Valid Email| P112
    P111 -->|Password| P112
    P112 -->|Hashed Password| P114
    P114 -->|Store User| D1
    P114 -->|Trigger| P115
    P115 -->|Assign Spectator| D2
    P115 -->|Confirmation| User

    %% View flows
    User -->|View Request| P116
    P116 <-->|Get User Data| D1
    P116 <-->|Get Roles| D2
    P116 -->|Account Details| User

    classDef external fill:#e1f5ff,stroke:#01579b,stroke-width:3px
    classDef process fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px
    classDef datastore fill:#ffe0b2,stroke:#e65100,stroke-width:2px

    class User external
    class P111,P112,P113,P114,P115,P116 process
    class D1,D2 datastore
